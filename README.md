# Metric Collector API

–ü—Ä–æ—Å—Ç–æ–π –≤–µ–±-—Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –ø–æ—Å–µ—â–µ–Ω–∏–π. –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —É—á–µ–±–Ω—ã–º –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å FastAPI –∏ PostgreSQL.



## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–ë—ç–∫–µ–Ω–¥:** Python 3.11
- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** FastAPI
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL
- **–î—Ä–∞–π–≤–µ—Ä –ë–î:** psycopg2-binary
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:** Pydantic-Settings, python-dotenv
- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä:** Uvicorn



## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ó–∞–ø–∏—Å—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ—Å–µ—â–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ POST-–∑–∞–ø—Ä–æ—Å.
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ GET-–∑–∞–ø—Ä–æ—Å.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger UI).

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/shulzhenk/metric-collector-api.git
    cd metric-collector-api
    ```

2.  **–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
    ```bash
    python -m venv venv
    ```
    *   **–ù–∞ macOS/Linux:**
        ```bash
        source venv/bin/activate
        ```
    *   **–ù–∞ Windows (PowerShell/CMD):**
        ```bash
        venv\Scripts\activate
        ```

3.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
    –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª-—à–∞–±–ª–æ–Ω `.env.example` –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª `.env` –∏ —É–∫–∞–∂–∏—Ç–µ –≤ –Ω–µ–º —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL.

    *   **–ù–∞ macOS/Linux:**
        ```bash
        cp .env.example .env
        ```
    *   **–ù–∞ Windows (CMD):**
        ```bash
        copy .env.example .env
        ```
    *   **–ù–∞ Windows (PowerShell):**
        ```bash
        Copy-Item .env.example .env
        ```


5.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
    ```bash
    python -m uvicorn app.main:app --reload
    ```


6.  **–û—Ç–∫—Ä–æ–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
    –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)

## üìù API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

- **`POST /visit`** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π –≤–∏–∑–∏—Ç.
  - **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `{"page_url": "string"}`
- **`GET /stats`** ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–∏–∑–∏—Ç–æ–≤.
- **`GET /`** ‚Äî –∫–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.